Actor SMGNail
{
  Projectile
  Radius 3
  Height 3
  Speed 60
  Damage 15
  Damagetype "Nailgun"
  Scale 0.85
  +BloodSplatter
  +MISSILE
  SeeSound ""
  DeathSound "Weapons/NailHit"
  Decal BulletChip
  States
  {
	  Spawn:
			NLPJ A 1 A_PlaySound("Weapons/NailFlight", CHAN_BODY,1.0,True)
		Fly:
			NLPJ A 1 A_SpawnItemEx("NailBlur", 0, 0, 0, 1, 0, 0, 180, 128)
			Loop
	  Crash:
	  Death:
		TNT1 A 0 A_StopSound(CHAN_BODY)
		TNT1 A 0 A_SpawnItem("HitPuff")
		TNT1 A 0 A_Stop
		NLPJ A 70 
		NLPJ AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_FadeOut(0.02)
		Stop
	
  XDeath:
		TNT1 A 0 A_StopSound(CHAN_BODY)
    NLPJ B 0 A_PlaySound("Weapons/NailHitBleed")
    Stop
  }
}

Actor SNGUnloaded : Inventory {
Inventory.MaxAmount 1
}

Actor NailFireMode : Inventory {
Inventory.MaxAmount 1
}

Actor RespectSNG : Inventory {
Inventory.MaxAmount 1
}

Actor RespectSNGDone : Inventory {
Inventory.MaxAmount 1
}

Actor SMGNail1 : SMGNail {
 Damagetype ExplosiveImpact
}

Actor SMGNail2 : SMGNail {
 Damagetype "SSG"
}

Actor SMGNail3 : SMGNail {
 Damagetype "Nailgun"
}

Actor SMGNailFire : SMGNail {
	Damage 25
 Damagetype Fire
 States {
	Spawn:
			TNT1 A 0  A_SpawnItem("RedFlare22")
			TNT1 A 0 A_CustomMissile ("RocketSmokeTrail52", 2, 0, random (70, 110), 2, random (0, 360))
			 TNT1 A 0 A_SpawnItem ("FireballExplosionFlamesSmall")
			NLPJ A 1 A_PlaySound("Weapons/NailFlight", CHAN_BODY,1.0,True)
	Fly:
			NLPJ A 1 A_SpawnItemEx("NailBlur", 0, 0, 0, 1, 0, 0, 180, 128)
			Loop
		Death:
		TNT1 A 0 A_StopSound(CHAN_BODY)
		TNT1 A 0 A_SpawnItem("HitPuff")
		TNT1 A 0 A_Stop
		TNT1 A 0  A_SpawnItem("RedFlare22")
			TNT1 A 0 A_CustomMissile ("RocketSmokeTrail52", 2, 0, random (70, 110), 2, random (0, 360))
			 TNT1 A 0 A_SpawnItem ("FireballExplosionFlamesSmall")
		NLPJ A 70 
		NLPJ AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 1 A_FadeOut(0.02)
		Stop
	 XDeath:
	 TNT1 A 0 A_SpawnItem ("FireballExplosionFlamesSmall")
		TNT1 A 0 A_StopSound(CHAN_BODY)
    NLPJ B 0 A_PlaySound("Weapons/NailHitBleed")
    Stop
 }
}

ACTOR SNGAmmo : Ammo
{
   Inventory.Amount 0
   Inventory.MaxAmount 100
   Ammo.BackpackAmount 0
   Ammo.BackpackMaxAmount 100
   Inventory.Icon "NLMGF0"
}

Actor SuperNailgun : PB_Weapon {
    Game Doom
    SpawnID 9440
    Weapon.BobRangeX 0.3
    Weapon.BobRangeY 0.5
    Weapon.BobStyle InverseSmooth
    Weapon.BobSpeed 2.4
    Weapon.AmmoType1 "PB_HighCalMag"
    Weapon.AmmoType2 "SNGAmmo"
    Weapon.AmmoGive 30	
    Weapon.AmmoUse1 0
    Weapon.AmmoUse2 0
   +WEAPON.NOAUTOAIM
   +INVENTORY.ALWAYSPICKUP
   +FORCEXYBILLBOARD
   +FLOORCLIP
   +DONTGIB
    Inventory.PickupSound "CBOXPKUP"
    Inventory.PickupMessage "You got the UAC Prototype Super Nailgun (Slot 5)!"
    Obituary "Became a Leaking Piece Of Meat By The Super Nailgun"
    AttackSound "None"
    Weapon.SlotNumber 5
    Weapon.SelectionOrder 2800
    Scale 0.4
    Tag "UAC Super Nailgun"
    Inventory.AltHudIcon "SNPIA0"
    PB_WeaponBase.RespectItem "RespectSNG"
    FloatBobStrength 0.5
    States
    {
    Steady:
		TNT1 A 0
		Goto Ready

	Ready:
		TNT1 A 0 A_JumpIfInventory("GoFatality",1,"Steady")
		TNT1 A 0 PB_RespectIfNeeded
	WeaponRespect:
		TNT1 A 0 {
			A_SetRoll(0);
			A_GiveInventory("RespectSNG",1);
			A_TakeInventory("PB_LockScreenTilt",1);
			return A_DoPBWeaponAction;
		    }
		TNT1 A 0 A_PlaySound("GENREADY")
		TNT1 A 0 A_JumpIfInventory("RespectSNGDone",1,"SelectAnimation")
		TNT1 A 0 A_GiveInventory("RespectSNGDone",1)
		TNT1 A 0 A_GiveInventory("SNGAmmo", 100)
		SNRE ABCDEFGHIIIIIIIJK 1 A_DoPBWeaponAction
		TNT1 A 0 A_PlaysoundEx("weapons/riflemagslap", "Auto")
		SNRE LMNOPPPQRSTUVWXYZ  1 A_DoPBWeaponAction
		SNR1 AB 1 A_DoPBWeaponAction
		TNT1 A 0 A_Playsound("weapons/shotgun/detach", 50)
		TNT1 A 0 A_Playsound("weapons/minigun/respect1", 51)
		SNR1 CDEFGGGHIJKL 1 A_DoPBWeaponAction
		SNLR A 6
		TNT1 A 0 A_Playsound("SNGA", 50)
		TNT1 A 0 A_Playsound("SNGB", 51)
		SNR1 MNO 1
		TNT1 A 0 A_Playsound("SNGA", 50)
		TNT1 A 0 A_Playsound("SNGB", 51)
		SNR1 MNO 2
		TNT1 A 0 A_Playsound("SNGA", 50)
		TNT1 A 0 A_Playsound("SNGB", 51)
		SNR1 MNO 3
		TNT1 A 0 A_Playsound("SNGA", 50)
		TNT1 A 0 A_Playsound("SNGB", 51)
		SNR1 MNO 4
		TNT1 A 0 A_Playsound("SNGA", 50)
		TNT1 A 0 A_Playsound("SNGB", 51)
		SNR1 MNO 5
		Goto Ready3
	SelectAnimation:
        TNT1 A 0 {
			A_SetRoll(0);
			return A_DoPBWeaponAction;
		     }
		TNT1 A 0 A_PlaySound("GENREADY")
		SNSU A 0 A_JumpIfInventory("SNGUnloaded",1,2)
		SNSE A 0
	   "####" ABCDEFG 1
	Ready3:
		TNT1 A 0 {
			A_WeaponOffset(0,32);
			A_SetRoll(0);
			PB_HandleCrosshair(67);
			A_TakeInventory("PB_LockScreenTilt",1);
			}
	    TNT1 A 0
	SuperNailgunReadyToFire:
	    SNRL J 0 A_JumpIfInventory("SNGUnloaded", 1, 2)
		SNLR A 0
	   "####" "#" 1 {
			return A_DoPBWeaponAction(WRF_ALLOWRELOAD);
		    }
		TNT1 A 0 A_JumpIfInventory("GoFatality",1,"Steady")
	    Loop

	Deselect:
       TNT1 A 0 A_JumpIfInventory ("GrabbedBarrel", 1, "PlaceBarrel")
	   TNT1 A 0 A_JumpIfInventory ("GrabbedFlameBarrel", 1, "PlaceFlameBarrel")
	   TNT1 A 0 A_JumpIfInventory ("GrabbedIceBarrel", 1, "PlaceIceBarrel")
	   TNT1 A 0 {
			A_WeaponOffset(0,32);
			A_SetRoll(0);
			PB_HandleCrosshair(67);
			A_TakeInventory("PB_LockScreenTilt",1);
		    }
	   SNSU A 0 A_JumpIfInventory("SNGUnloaded",1,2)
	   SNSE A 0
	  "####" GFEDCBA 1
	   TNT1 A 0 A_Lower
	   Wait

    Select:
	   TNT1 A 0 {
			A_WeaponOffset(0,32);
			A_SetRoll(0);
			PB_HandleCrosshair(67);
			A_TakeInventory("PB_LockScreenTilt",1);
		    }
	   TNT1 A 0 A_TakeInventory("HasBarrel",1)
	   TNT1 A 0 A_TakeInventory("HasIceBarrel",1)
	   TNT1 A 0 A_TakeInventory("HasFlameBarrel",1)
	   TNT1 A 0 A_TakeInventory("GrabbedBarrel",1)
	   TNT1 A 0 A_TakeInventory("GrabbedIceBarrel",1)
	   TNT1 A 0 A_TakeInventory("GrabbedFlameBarrel",1)
	   Goto SelectFirstPersonLegs
	   SelectContinue:
	   TNT1 A 0 A_Raise
	   Wait

	WeaponSpecial:
		TNT1 A 0 A_JumpIfInventory ("GrabbedBarrel", 1, "IdleBarrel")
		TNT1 A 0 A_JumpIfInventory ("GrabbedFlameBarrel", 1, "IdleFlameBarrel")
		TNT1 A 0 A_JumpIfInventory ("GrabbedIceBarrel", 1, "IdleIceBarrel")
		TNT1 A 0 {
			A_WeaponOffset(0,32);
			A_SetRoll(0);
			PB_HandleCrosshair(67);
			A_GiveInventory("PB_LockScreenTilt",1);
			A_Takeinventory("GoWeaponSpecialAbility",1);
			}
		TNT1 A 0 A_JumpIfInventory("NailFireMode", 1, "ChangeNormalMode")
		TNT1 A 0 A_PlaySound("LIGHTON")
		TNT1 A 0 A_Print("Fire Mode Active!")
		TNT1 A 0 A_GiveInventory("NailFireMode", 1)
		Goto SuperNailgunReadyToFire
	ChangeNormalMode:
	    TNT1 A 0 A_PlaySound("LIGHTON")
		TNT1 A 0 A_Print("Standard Mode Active!")
		TNT1 A 0 A_TakeInventory("NailFireMode", 1)
		Goto SuperNailgunReadyToFire

	Fire:
		TNT1 A 0 A_JumpIfInventory ("GrabbedBarrel", 1, "ThrowBarrel")
		TNT1 A 0 A_JumpIfInventory ("GrabbedFlameBarrel", 1, "ThrowFlameBarrel")
		TNT1 A 0 A_JumpIfInventory ("GrabbedIceBarrel", 1, "ThrowIceBarrel")
		TNT1 A 0 {
			A_WeaponOffset(0,32);
			A_SetRoll(0);
			PB_HandleCrosshair(67);
			A_TakeInventory("PB_LockScreenTilt",1);
			if(CountInv("NoFatality") == 0 && GetCVAR ("ttwcfbex") == 1) {
				return PB_Execute();
			}
			return state("");
		    }
		TNT1 A 0 A_JumpIfInventory("SNGAmmo", 1, 1)
		Goto Reload
		TNT1 A 0 A_JumpIfInventory("NailFireMode", 1, "FireFlame")
		TNT1 A 0 PB_WeaponRecoil(-0.6, 0)
		TNT1 A 0 A_ZoomFactor (0.98)
		TNT1 A 0 A_PlaySound("SNFIRE", 50)
		TNT1 A 0 A_TakeInventory("SNGAmmo", 1)
		TNT1 A 0 A_FireCustomMissile("SMGNail")
		SNLR F 1 BRIGHT
		TNT1 A 0 A_ZoomFactor (1)
		SNLR GHI 1
		TNT1 A 0 A_JumpIfInventory("SNGAmmo", 1,1)
		Goto Reload
		TNT1 A 0 PB_WeaponRecoil(-0.6, 0)
		TNT1 A 0 A_ZoomFactor (0.98)
		TNT1 A 0 A_PlaySound("SNFIRE", 50)
		TNT1 A 0 A_TakeInventory("SNGAmmo", 1)
		TNT1 A 0 A_FireCustomMissile("SMGNail")
		SNLR F 1 BRIGHT
		TNT1 A 0 A_ZoomFactor (1)
		SNLR GHI 1
		TNT1 A 0 A_JumpIfInventory("SNGAmmo", 1, 1)
		Goto Reload
		TNT1 A 0 PB_WeaponRecoil(-0.6, 0)
		TNT1 A 0 A_ZoomFactor (0.98)
		TNT1 A 0 A_PlaySound("SNFIRE", 50)
		TNT1 A 0 A_TakeInventory("SNGAmmo", 1)
		TNT1 A 0 A_FireCustomMissile("SMGNail")
		SNLR F 1 BRIGHT
		TNT1 A 0 A_ZoomFactor (1)
		SNLR GHI 1
		TNT1 A 0 A_JumpIfInventory("SNGAmmo", 1, 1)
		Goto Reload
		TNT1 A 0 PB_WeaponRecoil(-0.6, 0)
		TNT1 A 0 A_ZoomFactor (0.98)
		TNT1 A 0 A_PlaySound("SNFIRE", 50)
		TNT1 A 0 A_TakeInventory("SNGAmmo", 1)
		TNT1 A 0 A_FireCustomMissile("SMGNail")
		SNLR F 1 BRIGHT
		TNT1 A 0 A_ZoomFactor (1)
		SNLR GHI 1
		TNT1 A 0 A_Refire
		Goto SpinAfterFire
	SpinAfterFire:
		SNLR CDECD 1 A_DoPBWeaponAction(WRF_ALLOWRELOAD)
		SNLR ECDE 2 A_DoPBWeaponAction(WRF_ALLOWRELOAD)
		Goto SuperNailgunReadyToFire

	FireFlame:
		TNT1 A 0 A_JumpIfInventory("SNGAmmo", 1,1)
		Goto Reload
		TNT1 A 0 PB_WeaponRecoil(-1, 0)
		TNT1 A 0 A_ZoomFactor (0.98)
		TNT1 A 0 A_PlaySound("SNFIRE", 50)
		TNT1 A 0 A_TakeInventory("SNGAmmo", 1)
		TNT1 A 0 A_FireCustomMissile("SMGNailFire")
		SNLR F 1 BRIGHT
		TNT1 A 0 A_ZoomFactor (1)
		SNLR GHI 4
		TNT1 A 0 A_JumpIfInventory("SNGAmmo", 1,1)
		Goto Reload
		TNT1 A 0 PB_WeaponRecoil(-1, 0)
		TNT1 A 0 A_ZoomFactor (0.98)
		TNT1 A 0 A_PlaySound("SNFIRE", 50)
		TNT1 A 0 A_TakeInventory("SNGAmmo", 1)
		TNT1 A 0 A_FireCustomMissile("SMGNailFire")
		SNLR F 1 BRIGHT
		TNT1 A 0 A_ZoomFactor (1)
		SNLR GHI 3
		TNT1 A 0 A_JumpIfInventory("SNGAmmo", 1,1)
		Goto Reload
		TNT1 A 0 PB_WeaponRecoil(-1, 0)
		TNT1 A 0 A_ZoomFactor (0.98)
		TNT1 A 0 A_PlaySound("SNFIRE", 50)
		TNT1 A 0 A_TakeInventory("SNGAmmo", 1)
		TNT1 A 0 A_FireCustomMissile("SMGNailFire")
		SNLR F 1 BRIGHT
		TNT1 A 0 A_ZoomFactor (1)
		SNLR GHI 3
		TNT1 A 0 A_JumpIfInventory("SNGAmmo", 1,1)
		Goto Reload
		TNT1 A 0 PB_WeaponRecoil(-1, 0)
		TNT1 A 0 A_ZoomFactor (0.98)
		TNT1 A 0 A_PlaySound("SNFIRE", 50)
		TNT1 A 0 A_TakeInventory("SNGAmmo", 1)
		TNT1 A 0 A_FireCustomMissile("SMGNailFire")
		SNLR F 1 BRIGHT
		TNT1 A 0 A_ZoomFactor (1)
		SNLR GHI 2
		TNT1 A 0 A_Refire("FireHoldFlame")
		Goto SpinAfterFire
	FireHoldFlame:
		TNT1 A 0 A_JumpIfInventory("SNGAmmo", 1,1)
		Goto Reload
		TNT1 A 0 PB_WeaponRecoil(-1, 0)
		TNT1 A 0 A_ZoomFactor (0.98)
		TNT1 A 0 A_PlaySound("SNFIRE", 50)
		TNT1 A 0 A_TakeInventory("SNGAmmo", 1)
		TNT1 A 0 A_FireCustomMissile("SMGNailFire")
		SNLR F 1 BRIGHT
		TNT1 A 0 A_ZoomFactor (1)
		SNLR GHI 1
		TNT1 A 0 A_JumpIfInventory("SNGAmmo", 1, 1)
		Goto Reload
		TNT1 A 0 PB_WeaponRecoil(-1, 0)
		TNT1 A 0 A_ZoomFactor (0.98)
		TNT1 A 0 A_PlaySound("SNFIRE", 50)
		TNT1 A 0 A_TakeInventory("SNGAmmo", 1)
		TNT1 A 0 A_FireCustomMissile("SMGNailFire")
		SNLR F 1 BRIGHT
		TNT1 A 0 A_ZoomFactor (1)
		SNLR GHI 1
		TNT1 A 0 A_JumpIfInventory("SNGAmmo", 1, 1)
		Goto Reload
		TNT1 A 0 PB_WeaponRecoil(-1, 0)
		TNT1 A 0 A_ZoomFactor (0.98)
		TNT1 A 0 A_PlaySound("SNFIRE", 50)
		TNT1 A 0 A_TakeInventory("SNGAmmo", 1)
		TNT1 A 0 A_FireCustomMissile("SMGNailFire")
		SNLR F 1 BRIGHT
		TNT1 A 0 A_ZoomFactor (1)
		SNLR GHI 1
		TNT1 A 0 A_Refire("FireHoldFlame")
		Goto SpinAfterFire

	AltFire:
		TNT1 A 0 A_JumpIfInventory ("GrabbedBarrel", 1, "PlaceBarrel")
		TNT1 A 0 A_JumpIfInventory ("GrabbedFlameBarrel", 1, "PlaceFlameBarrel")
		TNT1 A 0 A_JumpIfInventory ("GrabbedIceBarrel", 1, "PlaceIceBarrel")
		TNT1 A 0 {
		    A_WeaponOffset(0,32);
			A_SetRoll(0);
			PB_HandleCrosshair(67);
			A_TakeInventory("PB_LockScreenTilt",1);
			}
		TNT1 A 0 A_JumpIfInventory("SNGAmmo", 4, 1)
		Goto Reload
		TNT1 A 0 A_JumpIfInventory("NailFireMode", 1, "AltFireFlame")
		TNT1 A 0 PB_WeaponRecoil(-2.5, 0)
		TNT1 A 0 A_ZoomFactor (0.96)
		TNT1 A 0 A_Playsound("SNGA", 50)
		TNT1 A 0 A_Playsound("SNGB", 51)
		SNR1 MNO 1
		TNT1 A 0 A_Playsound("SNGA", 50)
		TNT1 A 0 A_Playsound("SNGB", 51)
		SNR1 MNO 1
		TNT1 A 0 A_Playsound("SNGA", 50)
		TNT1 A 0 A_Playsound("SNGB", 51)
		SNR1 MNO 1
		TNT1 A 0 A_Playsound("SNGA", 50)
		TNT1 A 0 A_Playsound("SNGB", 51)
		TNT1 A 0 A_PlaySound("SNFIRE", 52)
		TNT1 A 0 A_FireCustomMissile("SMGNail")
		TNT1 A 0 A_FireCustomMissile("SMGNail",  0, 0, 7)
		TNT1 A 0 A_FireCustomMissile("SMGNail",  0, 0, -7)
		TNT1 A 0 A_FireCustomMissile("SMGNail",  0, 0, 0, -8)
		TNT1 A 0 A_TakeInventory("SNGAmmo", 4)
		SNLR F 1 BRIGHT
		TNT1 A 0 A_ZoomFactor (1)
		SNLR GHI 2
		TNT1 A 0 A_Refire
		Goto SuperNailgunReadyToFire
	AltFireFlame:
		TNT1 A 0 PB_WeaponRecoil(-2.5, 0)
		TNT1 A 0 A_ZoomFactor (0.96)
		TNT1 A 0 A_PlaySound("SNFIRE", 50)
		TNT1 A 0 A_Playsound("SNGA", 50)
		TNT1 A 0 A_Playsound("SNGB", 51)
		SNR1 MNO 2
		TNT1 A 0 A_Playsound("SNGA", 50)
		TNT1 A 0 A_Playsound("SNGB", 51)
		SNR1 MNO 1
		TNT1 A 0 A_Playsound("SNGA", 50)
		TNT1 A 0 A_Playsound("SNGB", 51)
		SNR1 MNO 1
		TNT1 A 0 A_Playsound("SNGA", 50)
		TNT1 A 0 A_Playsound("SNGB", 51)
		TNT1 A 0 A_PlaySound("SNFIRE", 52)
		TNT1 A 0 A_FireCustomMissile("SMGNailFire")
		TNT1 A 0 A_FireCustomMissile("SMGNailFire",  0, 0, 7)
		TNT1 A 0 A_FireCustomMissile("SMGNailFire",  0, 0, -7)
		TNT1 A 0 A_FireCustomMissile("SMGNailFire",  0, 0, 0, -8)
		TNT1 A 0 A_TakeInventory("SNGAmmo", 4)
		SNLR F 1 BRIGHT
		TNT1 A 0 A_ZoomFactor (1)
		SNLR GHI 2
		TNT1 A 0 A_Refire
		Goto SuperNailgunReadyToFire

	Reload:
		TNT1 A 0 A_JumpIfInventory ("GrabbedBarrel", 1, "IdleBarrel")
		TNT1 A 0 A_JumpIfInventory ("GrabbedFlameBarrel", 1, "IdleFlameBarrel")
		TNT1 A 0 A_JumpIfInventory ("GrabbedIceBarrel", 1, "IdleIceBarrel")
		TNT1 A 0 A_TakeInventory("Reloading")
		TNT1 A 0 A_JumpIfInventory("SNGAmmo", 100, "SuperNailgunReadyToFire")
		TNT1 A 0 A_JumpIfInventory("PB_HighCalMag", 1, "ReloadSequence")
		Goto SuperNailgunReadyToFire
	ReloadSequence:
		TNT1 A 0 A_JumpIfInventory("PB_HighCalMag", 1, 1)
		Goto ReloadAnimation
		TNT1 A 0 A_JumpIfInventory("SNGAmmo", 100, "ReloadAnimation")
		TNT1 A 0 A_GiveInventory("SNGAmmo", 1)
		TNT1 A 0 A_TakeInventory("PB_HighCalMag", 1,TIF_NOTAKEINFINITE)
		Goto ReloadSequence
	ReloadAnimation:
		TNT1 A 0 A_JumpIfInventory("SNGUnloaded", 1, "ReloadUnloaded")
		SNRL ABCD 1 A_SetRoll(roll-2)
		TNT1 A 0 A_FireCustomMissile("EmptyASGDrum",-5,0,8,-4)
		TNT1 A 0 A_PlaysoundEx("weapons/shotgun/detach", "Auto")
		SNRL EFGH 1 A_SetRoll(roll+2)
	ReloadUnloaded:
		TNT1 A 0 A_TakeInventory("SNGUnloaded")
		SNRL IJKLM 1
		TNT1 A 0 A_PlaysoundEx("weapons/riflemagslap", "Auto")
		SNRL NOPQR 1 A_SetRoll(roll+2)
		SNRL STUVWX 1 A_SetRoll(roll-2)
		TNT1 A 0 A_SetRoll(0)
		Goto SuperNailgunReadyToFire
	Unload:
		TNT1 A 0 A_TakeInventory("Unloading")
		TNT1 A 0 A_JumpIfInventory("SNGUnloaded", 1, "SuperNailgunReadyToFire")
		TNT1 A 0 A_JumpIfInventory("SNGAmmo", 1, 1)
		Goto SuperNailgunReadyToFire
		TNT1 A 0 A_JumpIfInventory("SNGUnloaded", 1, "SuperNailgunReadyToFire")
		SNRL ABCD 1 A_SetRoll(roll-2)
		TNT1 A 0 A_PlaysoundEx("weapons/shotgun/detach", "Auto")
		SNRL EFGH 1 A_SetRoll(roll+2)
		TNT1 A 0 A_GiveInventory("SNGUnloaded")		
	UnloadSequence:
		TNT1 A 0 A_JumpIfInventory("SNGAmmo", 1, 1)
		Goto SuperNailgunReadyToFire
		TNT1 A 0 A_GiveInventory("PB_HighCalMag", 1)
		TNT1 A 0 A_TakeInventory("SNGAmmo", 1)
		Loop

	Spawn:
	    SNPI A -1
	    Stop

	FlashKicking:
		TNT1 A 0 A_JumpIfInventory ("GrabbedBarrel", 1, "FlashBarrelPunching")
		TNT1 A 0 A_JumpIfInventory ("GrabbedFlameBarrel", 1, "FlashBarrelPunching")
		TNT1 A 0 A_JumpIfInventory ("GrabbedIceBarrel", 1, "FlashBarrelPunching")
		TNT1 A 0 A_ClearOverlays(10,11)
		SNSU A 0 A_JumpIfInventory("SNGUnloaded",1,2)
		SNSE A 0 A_DoPBWeaponAction
	   "####" F 1
	   "####" E 1
	   "####" D 1 
	   "####" C 1
	   "####" B 1
	   "####" A 4
	   "####" B 1
	   "####" C 1
	   "####" D 1
	   "####" E 1
	   "####" F 1
	   "####" G 1
		Goto SuperNailgunReadyToFire

	FlashAirKicking:
		TNT1 A 0 A_JumpIfInventory ("GrabbedBarrel", 1, "FlashBarrelPunching")
		TNT1 A 0 A_JumpIfInventory ("GrabbedFlameBarrel", 1, "FlashBarrelPunching")
		TNT1 A 0 A_JumpIfInventory ("GrabbedIceBarrel", 1, "FlashBarrelPunching")
		TNT1 A 0 A_ClearOverlays(10,11)
		SNSU A 0 A_JumpIfInventory("SNGUnloaded",1,2)
		SNSE A 0 A_DoPBWeaponAction
	   "####" F 1
	   "####" E 1
	   "####" D 1 
	   "####" C 1
	   "####" B 1
	   "####" A 4
	   "####" B 1
	   "####" C 1
	   "####" D 1
	   "####" E 1
	   "####" F 1
	   "####" G 1
		Goto SuperNailgunReadyToFire

	FlashSlideKicking:
		TNT1 A 0 A_JumpIfInventory ("GrabbedBarrel", 1, "FlashBarrelPunching")
		TNT1 A 0 A_JumpIfInventory ("GrabbedFlameBarrel", 1, "FlashBarrelPunching")
		TNT1 A 0 A_JumpIfInventory ("GrabbedIceBarrel", 1, "FlashBarrelPunching")
		TNT1 A 0 A_ClearOverlays(10,11)
		SNSU A 0 A_JumpIfInventory("SNGUnloaded",1,2)
		SNSE A 0 A_DoPBWeaponAction
	   "####" F 1
	   "####" E 1
	   "####" D 1 
	   "####" C 1
	   "####" B 1
	   "####" A 8
	   "####" B 1
	   "####" C 1
	   "####" D 1
	   "####" E 1
	   "####" F 1
	   "####" G 1
		Goto SuperNailgunReadyToFire

	FlashSlideKickingStop:
		TNT1 A 0 A_JumpIfInventory ("GrabbedBarrel", 1, "FlashBarrelPunching")
		TNT1 A 0 A_JumpIfInventory ("GrabbedFlameBarrel", 1, "FlashBarrelPunching")
		TNT1 A 0 A_JumpIfInventory ("GrabbedIceBarrel", 1, "FlashBarrelPunching")
		TNT1 A 0 A_ClearOverlays(10,11)
		SNSU A 0 A_JumpIfInventory("SNGUnloaded",1,2)
		SNSE A 0 A_DoPBWeaponAction
	   "####" G 1
		Goto SuperNailgunReadyToFire

	FlashPunching: //Due to differences with quick melee, it's copied from the kicking state.
		TNT1 A 0 A_JumpIfInventory ("GrabbedBarrel", 1, "FlashBarrelPunching")
		TNT1 A 0 A_JumpIfInventory ("GrabbedFlameBarrel", 1, "FlashBarrelPunching")
		TNT1 A 0 A_JumpIfInventory ("GrabbedIceBarrel", 1, "FlashBarrelPunching")
		TNT1 A 0 A_ClearOverlays(10,11)
		SNSU A 0 A_JumpIfInventory("SNGUnloaded",1,2)
	    SNSE A 0 A_DoPBWeaponAction
	   "####" F 1
	   "####" E 1
	   "####" D 1 
	   "####" C 1
	   "####" B 1
	   "####" A 3
	   "####" B 1
	   "####" C 1
	   "####" D 1
	   "####" E 1
	   "####" F 1
	   "####" G 1
		Stop
    }
}